<script>
  function init() {
    var map = L.map('mapcontainer', { zoomControl: false });

    var initialLatLng = [35.68927557318069, 139.6997988239306];
    map.setView(initialLatLng, 15);

    L.tileLayer('https://cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png', {
      attribution: "<a href='https://maps.gsi.go.jp/development/ichiran.html' target='_blank'>地理院タイル</a>"
    }).addTo(map);

    // CSVファイルから緯度経度を読み取り、地図上にプロット
    fetch('./place.csv')
      .then(response => response.text())
      .then(data => {
        var lines = data.split('\n');
        for (var i = 1; i < lines.length; i++) { // 1行目はヘッダー
          var parts = lines[i].split(',');
          var lat = parseFloat(parts[0]);
          var lng = parseFloat(parts[1]);
          L.marker([lat, lng]).addTo(map);
        }
      })
      .catch(error => console.error('Error:', error));

    // マーカーの追加
    var mpoint = [35.8627, 139.6072];
    var sucontents = "しましゅんです<br><img src='geo.png' width='500' height='375'>";
    var popup1 = L.popup({ maxWidth: 550 }).setContent(sucontents);
    L.marker(mpoint, { draggable: true }).bindPopup(popup1).addTo(map);

  }
</script>
