<!DOCTYPE html>
<html>
<head>
  <title>地図表示</title>
  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.0/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.3.0/dist/leaflet.js"></script>

<script>
  function init() {
    var map = L.map('mapcontainer', { zoomControl: false });
    var mpoint = [35.68927557318069, 139.6997988239306];
    map.setView(mpoint, 15);
    L.tileLayer('https://cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png', {
      attribution: "<a href='https://maps.gsi.go.jp/development/ichiran.html' target='_blank'>地理院タイル</a>"
    }).addTo(map);
    //ポップアップする文字（HTML可、ここでは画像を表示）
    var sucontents = "しましゅんです<br><img src='geo.png' width='500' height='375'>"
    //ポップアップオブジェクトを作成
    var popup1 = L.popup({ maxWidth: 550 }).setContent(sucontents);
    var popup2 = L.popup().setContent("桜区役所です");
    //マーカーにポップアップを紐付けする。同時にbindTooltipでツールチップも追加
    L.marker(mpoint, { draggable: true }).bindPopup(popup1).bindTooltip("埼玉大学").addTo(map);
    L.marker([35.8561, 139.6098]).bindPopup(popup2).bindTooltip("桜区役所").addTo(map);
  
    // CSVファイルから緯度経度を読み取り、地図上にプロット
  fetch('place.csv')
  .then(response => response.text())
  .then(data => {
    var lines = data.split('\n');
    for (var i = 1; i < lines.length; i++) { // 1行目はヘッダー
      var parts = lines[i].split(',');
      var lat = parseFloat(parts[0]);
      var lng = parseFloat(parts[1]);
      L.marker([lat, lng]).addTo(map);
    }
  })
  .catch(error => console.error('Error:', error));
 }
</script>
  
</head>
<body onload="init()">
  <div id="mapcontainer" style="position:absolute;top:0;left:0;right:0;bottom:0;"></div>
</body>

</html>
